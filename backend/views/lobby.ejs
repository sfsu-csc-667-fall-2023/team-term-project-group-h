<!DOCTYPE html>
<html lang="en">
    <head>
        <%- include('partials/header') %>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Hearts</title>
        <style>
            #createRoom
            {
                position: absolute;
                right: 560px;
                top: 180px;
                width: 125px;
                height: 45px;
            }

            #signOut {
                position: absolute;
                top: 5px;
                right: 30px;
                width: 125px;
                height: 45px;
            }

            #lobbyChat {
                position: absolute;
                bottom: 48.5px;
                right: -13px;
            }

            #chatInput {
                position: absolute;
                bottom: 0.5px;
                right: 140px;
                width: 400px;
            }

            #chatSubmit {
                position: absolute;
                bottom: -2.5px;
                right: 50px;
            }

            #chatMessages {
                position: absolute;
                bottom: 50px;
                right: 51px;
                width: 488.5px;
                height: 552px;
                background-color: rgb(255, 255, 255);
                overflow: hidden; 
                overflow-y: scroll;
            }

            div p{
                color: black;
            }

            #navbar{
                position: absolute;
                top: 20px;
                left: 50px;
            }

            #title {
                position: absolute;
                left: 50px;
                color: black;
            }

            #players {
                position: absolute;
                left: 800px;
                color: black;
            }

            .players {
                position: relative;
                left: 774px;
                width: 100px;
                top: -36.4px;
            }

            #time {
                position: absolute;
                left: 1000px;
                color: black;
            }
            #refresh {
                position: absolute;
                left: 1050px;
                color: black;
            }

            .time {
                position: relative;
                left: 956px;
                width: 100px;
                top: -90px;
            }

            .entry {
                position: relative;
                left: -32px;
                font-size: 25px;
                background-color: rgba(230, 230, 230, 0.61);
                border-bottom: 1px solid rgb(0, 0, 0);
                height: 60px;
                width: 1100px;
                padding-left: 33px;
                padding-top: 10px;
            }

            #labels {
                position: absolute;
                top: 150px;
                left: 50px;
            }

            .gameList {
                position: absolute;
                top: 180px;
                left: 50px;
                width: 1100px;
                height: 600px;
                background-color: rgb(255, 255, 255);
            }
        </style>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <script src="/scripts/chat.js" defer></script>
        <script src="/scripts/lobby.js" defer></script>
    </head>
    <body class="p-3 mb-2 bg-success" >
        <nav class="navbar navbar-expand-lg border-primary-subtle ">
            <div class="container-fluid">
                <span class="navbar-brand">Hearts</span>
              
                <a class="navbar-brand">
                    <img src="/images/Hearts.jpg" alt="Hearts_img" width="30" height="24">
                </a>
                </button>
            
                <button type="button" class="btn btn-light" id="signOut"> 
                    <a style="text-decoration: none; color: black;" href="/login/logout">Sign out</a>
                </button>

              <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav">
                </ul>
              </div>
            </div>
        </nav>

        <div id="labels">
            <div id="title">Title</div>
            <div id="players">Players</div>
            <div id="time">Time</div>
            <div id="refresh">Refresh</div>
        </div>

        <button type="button" class="btn btn-dark" id="createRoom" data-bs-toggle="modal" data-bs-target=".modal">Create Room</button>

        <div class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Create new room</h5>
                    </div>
                    <div class="modal-body">
                        <p>Give your room a name.</p>
                        <form action="/game/create" method="POST">
                            <input type="text" name="title"/>
                            <div class="modal-footer">
                                <button type="submit" class="btn btn-dark">Confirm</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

          
        <section class="gameList" data-user="<%= user.id %>">
            <div>
                Joined Games
                <ul class="joined" style="overflow: hidden; overflow-y: scroll; max-height: 600px;">
                    <% currentGames.forEach((game) => { %>
                    <a href="/game/<%= game.game_id %>/join" style="text-decoration: none; color: black;">
                        <div class="entry">
                            <%= game.title %>
                        </div>
                    </a>
                    <% }) %>
                </ul>
            </div>
            <div>
                Available Games
            </div>
            <ul class="available" style="overflow: hidden; overflow-y: scroll; max-height: 600px;">
                <% availableGames.forEach((game) => { %>
                <a href="/game/<%= game.id %>/join" style="text-decoration: none; color: black;">
                    <div class="entry">
                        <%= game.title %>
                    </div>
                </a>
                <% }) %>
            </ul>
        </section>

        <template id="join-game-entry">
            <a href="" style="text-decoration: none; color: black;">
                <div class="entry">
                    <p class="players"></p>
                    <p class="time"></p>
                </div>
            </a>
        </template>

        <div id="lobbyChat">
            <%- include('partials/chat', { roomId: 0 }) %>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </body>
</html>